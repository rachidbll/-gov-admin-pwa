"use strict";(()=>{var e={};e.id=871,e.ids=[871],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},8651:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var o={};t.r(o),t.d(o,{POST:()=>d});var s=t(9303),n=t(8716),a=t(670),i=t(7070);let p=require("child_process");var c=t(1017),u=t.n(c);async function d(e){try{let r=(await e.formData()).get("file");if(!r)return i.NextResponse.json({error:"No file provided"},{status:400});let t=await r.arrayBuffer(),o=Buffer.from(t),s=u().join(process.cwd(),"scripts","excel_processor.py");return new Promise((e,r)=>{let t=(0,p.spawn)("python",[s,"ocr"]),n="",a="";t.stdout.on("data",e=>{n+=e.toString()}),t.stderr.on("data",e=>{a+=e.toString()}),t.on("close",t=>{if(0!==t){console.error(`Python script exited with code ${t}: ${a}`),r(i.NextResponse.json({error:`Python script error: ${a}`},{status:500}));return}try{let r=JSON.parse(n);e(i.NextResponse.json({success:!0,data:r},{status:200}))}catch(e){console.error("Failed to parse Python script output:",e),r(i.NextResponse.json({error:"Failed to parse Python script output"},{status:500}))}}),t.stdin.write(o),t.stdin.end()})}catch(e){return console.error("OCR processing API error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/ocr/process/route",pathname:"/api/ocr/process",filename:"route",bundlePath:"app/api/ocr/process/route"},resolvedPagePath:"C:\\Gemnini\\gov-admin-pwa\\app\\api\\ocr\\process\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:f}=l,m="/api/ocr/process/route";function v(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(8651));module.exports=o})();