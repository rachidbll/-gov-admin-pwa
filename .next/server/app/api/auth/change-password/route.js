"use strict";(()=>{var e={};e.id=814,e.ids=[814],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},2761:e=>{e.exports=require("node:async_hooks")},7718:e=>{e.exports=require("node:child_process")},6005:e=>{e.exports=require("node:crypto")},5673:e=>{e.exports=require("node:events")},7561:e=>{e.exports=require("node:fs")},3977:e=>{e.exports=require("node:fs/promises")},612:e=>{e.exports=require("node:os")},9411:e=>{e.exports=require("node:path")},7742:e=>{e.exports=require("node:process")},5997:e=>{e.exports=require("node:tty")},7261:e=>{e.exports=require("node:util")},1017:e=>{e.exports=require("path")},9159:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>w,requestAsyncStorage:()=>h,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>d});var o=t(9303),a=t(8716),n=t(670),p=t(7070),i=t(2331),u=t(8691);async function d(e){try{let{userId:r,currentPassword:t,newPassword:s}=await e.json();if(!r||!t||!s)return p.NextResponse.json({error:"All fields are required"},{status:400});let o=await i._.user.findUnique({where:{id:r}});if(!o||!await u.ZP.compare(t,o.password))return p.NextResponse.json({error:"Invalid current password"},{status:401});let a=await u.ZP.hash(s,10);return await i._.user.update({where:{id:r},data:{password:a,isDefaultPassword:!1}}),p.NextResponse.json({success:!0},{status:200})}catch(e){return console.error("Change password error:",e),p.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/change-password/route",pathname:"/api/auth/change-password",filename:"route",bundlePath:"app/api/auth/change-password/route"},resolvedPagePath:"C:\\Gemnini\\gov-admin-pwa\\app\\api\\auth\\change-password\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:l}=c,q="/api/auth/change-password/route";function w(){return(0,n.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:x})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972,691,331],()=>t(9159));module.exports=s})();