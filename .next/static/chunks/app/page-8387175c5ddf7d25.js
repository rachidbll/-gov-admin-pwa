(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8186:function(e,s,a){Promise.resolve().then(a.bind(a,8436))},8436:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return so}});var t=a(7437),r=a(2265),l=a(1538),i=a(3027),n=a(7440);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:d=!1,...o}=e,m=d?l.g7:"button";return(0,t.jsx)(m,{className:(0,n.cn)(c({variant:r,size:i,className:a})),ref:s,...o})});d.displayName="Button";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});m.displayName="CardHeader";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});u.displayName="CardTitle";let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});x.displayName="CardDescription";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...r})});h.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";let f=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(f({variant:a}),s),...r})}var j=a(2447);let g=j.fC,v=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(j.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});v.displayName=j.aV.displayName;let y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(j.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});y.displayName=j.xz.displayName;let N=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(j.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});N.displayName=j.VY.displayName;var w=a(6160),b=a(5984),C=a(4258),S=a(6127),F=a(2023),k=a(2940),E=a(933),T=a(2513),R=a(233),D=a(1240),P=a(7164);let Z=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});Z.displayName="Input";var A=a(8364);let I=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(A.f,{ref:s,className:(0,n.cn)(I(),a),...r})});O.displayName=A.f.displayName;var z=a(7549),U=a(2421),L=a(4392),q=a(2468);let _=z.fC;z.ZA;let M=z.B4,V=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(z.xz,{ref:s,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,t.jsx)(z.JO,{asChild:!0,children:(0,t.jsx)(U.Z,{className:"h-4 w-4 opacity-50"})})]})});V.displayName=z.xz.displayName;let G=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(z.u_,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(L.Z,{className:"h-4 w-4"})})});G.displayName=z.u_.displayName;let Y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(z.$G,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(U.Z,{className:"h-4 w-4"})})});Y.displayName=z.$G.displayName;let J=r.forwardRef((e,s)=>{let{className:a,children:r,position:l="popper",...i}=e;return(0,t.jsx)(z.h_,{children:(0,t.jsxs)(z.VY,{ref:s,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,t.jsx)(G,{}),(0,t.jsx)(z.l_,{className:(0,n.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(Y,{})]})})});J.displayName=z.VY.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(z.__,{ref:s,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=z.__.displayName;let B=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(z.ck,{ref:s,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(z.wU,{children:(0,t.jsx)(q.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(z.eT,{children:r})]})});B.displayName=z.ck.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(z.Z0,{ref:s,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=z.Z0.displayName;var H=a(9646);let Q=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(H.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,t.jsx)(H.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});Q.displayName=H.fC.displayName;var $=a(6506);let W=r.forwardRef((e,s)=>{let{className:a,value:r,...l}=e;return(0,t.jsx)($.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:(0,t.jsx)($.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});W.displayName=$.fC.displayName;var X=a(6356),K=a(8184),ee=a(690),es=a(883),ea=a(5733),et=a(9061),er=a(311);class el{static async processFile(e){let s=new FormData;s.append("file",e);try{let e=await fetch("/api/forms/upload-excel",{method:"POST",body:s});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to process Excel file")}return(await e.json()).data}catch(e){throw console.error("Excel processing error:",e),e}}static mapColumnToFormField(e){let s={id:"field_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),label:e.displayName,type:e.fieldType,required:e.nullPercentage<10,placeholder:"Enter ".concat(e.displayName.toLowerCase())};switch(e.fieldType){case"select":return{...s,options:e.categories||[]};case"email":return{...s,placeholder:"Enter email address",validation:{pattern:"^[^@]+@[^@]+\\.[^@]+$",message:"Please enter a valid email address"}};case"number":return{...s,placeholder:"Enter number",validation:{min:0,message:"Please enter a valid number"}};case"date":return{...s,placeholder:"Select date"};case"textarea":return{...s,placeholder:"Enter ".concat(e.displayName.toLowerCase(),"...")};default:return s}}static generateFormFromColumns(e,s){let a=e.map(e=>this.mapColumnToFormField(e)),t=s.replace(/\.[^/.]+$/,"").replace(/[_-]/g," ").replace(/\b\w/g,e=>e.toUpperCase());return{title:"".concat(t," Form"),description:"Auto-generated form from ".concat(s),fields:a,settings:{allowMultipleSubmissions:!0,requireAuthentication:!0}}}}var ei=a(9324);let en=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(ei.fC,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(ei.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(q.Z,{className:"h-4 w-4"})})})});en.displayName=ei.fC.displayName;var ec=a(23);let ed=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(ec.fC,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...l,children:[(0,t.jsx)(ec.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(eo,{}),(0,t.jsx)(ec.Ns,{})]})});ed.displayName=ec.fC.displayName;let eo=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...l}=e;return(0,t.jsx)(ec.gb,{ref:s,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,t.jsx)(ec.q4,{className:"relative flex-1 rounded-full bg-border"})})});eo.displayName=ec.gb.displayName;let em=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",a),...r})})});em.displayName="Table";let eu=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",a),...r})});eu.displayName="TableHeader";let ex=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...r})});ex.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let eh=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});eh.displayName="TableRow";let ef=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});ef.displayName="TableHead";let ep=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});ep.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var ej=a(7589),eg=a(7019),ev=a(1976),ey=a(6780);function eN(e){let{data:s,selectedColumns:a,onColumnToggle:l,onGenerateForm:i}=e,[n,c]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),g=n?s.sampleRows:s.sampleRows.slice(0,3),v=s.columns.map(e=>e.displayName),y=e=>{switch(e){case"string":return"\uD83D\uDCDD";case"number":return"\uD83D\uDD22";case"date":return"\uD83D\uDCC5";case"boolean":return"☑️";case"categorical":return"\uD83D\uDCCB";default:return"\uD83D\uDCC4"}},N=(e,s)=>{let a=e/s*100;return 0===a?"text-green-600":a<10?"text-yellow-600":"text-red-600"},w=e=>null==e?(0,t.jsx)("span",{className:"text-gray-400 italic",children:"null"}):"boolean"==typeof e?(0,t.jsx)(p,{variant:e?"default":"secondary",children:e.toString()}):"number"==typeof e?(0,t.jsx)("span",{className:"font-mono",children:e.toLocaleString()}):(0,t.jsx)("span",{children:e.toString()});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(o,{className:"border-blue-200 bg-blue-50",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(u,{className:"flex items-center space-x-2 text-blue-800",children:[(0,t.jsx)(ej.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"DataFrame Preview"})]}),(0,t.jsxs)(x,{className:"text-blue-700",children:[s.filename," • ",s.rowCount," rows \xd7 ",s.columnCount," columns"]})]}),(0,t.jsx)(h,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Total Rows"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.rowCount.toLocaleString()})]}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Columns"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.columnCount})]}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Selected"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.size})]}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Memory"}),(0,t.jsx)("div",{className:"text-lg font-bold text-gray-600",children:s.metadata.memoryUsage?"".concat(Math.round(s.metadata.memoryUsage/1024)," KB"):"N/A"})]})]})})]}),(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u,{children:"Column Selection"}),(0,t.jsx)(x,{children:"Choose which columns to include in your form. Click on column headers to toggle selection."})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>j(!f),children:[f?(0,t.jsx)(eg.Z,{className:"h-4 w-4 mr-1"}):(0,t.jsx)(ea.Z,{className:"h-4 w-4 mr-1"}),f?"Hide":"Show"," Details"]}),(0,t.jsxs)(d,{onClick:i,disabled:0===a.size,className:"bg-blue-600 hover:bg-blue-700",children:["Generate Form (",a.size," fields)",(0,t.jsx)(ev.Z,{className:"h-4 w-4 ml-2"})]})]})]})}),(0,t.jsxs)(h,{children:[f&&(0,t.jsx)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.columns.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-all ".concat(a.has(e.name)?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 bg-white hover:border-gray-300"),onClick:()=>l(e.name),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(en,{checked:a.has(e.name),onChange:()=>{}}),(0,t.jsx)("span",{className:"text-lg",children:y(e.dataType)})]}),a.has(e.name)&&(0,t.jsx)(k.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.displayName}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Type:"," ",(0,t.jsx)(p,{variant:"outline",className:"text-xs",children:e.dataType})]}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsxs)("div",{children:["Unique: ",e.uniqueCount.toLocaleString()]}),(0,t.jsxs)("div",{className:N(e.nullCount,s.rowCount),children:["Null: ",e.nullCount," (",(e.nullCount/s.rowCount*100).toFixed(1),"%)"]})]}),(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsx)("div",{className:"text-gray-500 mb-1",children:"Sample values:"}),(0,t.jsx)("div",{className:"space-y-1",children:e.sampleValues.slice(0,2).map((e,s)=>(0,t.jsx)("div",{className:"truncate",children:w(e)},s))})]})]})]},e.name))}),(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-2 border-b flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["Data Preview (",g.length," of ",s.sampleRows.length," sample rows)"]}),(0,t.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>c(!n),children:n?"Show Less":"Show All ".concat(s.sampleRows.length," Rows")})]}),(0,t.jsx)(ed,{className:"h-96",children:(0,t.jsxs)(em,{children:[(0,t.jsx)(eu,{children:(0,t.jsxs)(eh,{className:"bg-gray-50",children:[(0,t.jsx)(ef,{className:"w-12 text-center",children:"#"}),v.map(e=>{let r=s.columns.find(s=>s.displayName===e),i=a.has((null==r?void 0:r.name)||"");return(0,t.jsx)(ef,{className:"cursor-pointer transition-colors min-w-32 ".concat(i?"bg-blue-100 text-blue-800 border-blue-300":"hover:bg-gray-100"),onClick:()=>r&&l(r.name),children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(en,{checked:i,onChange:()=>{}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e}),(0,t.jsxs)("div",{className:"text-xs font-normal text-gray-500",children:[y((null==r?void 0:r.dataType)||"")," ",null==r?void 0:r.dataType]})]})]})},e)})]})}),(0,t.jsx)(ex,{children:g.map((e,r)=>(0,t.jsxs)(eh,{className:"hover:bg-gray-50",children:[(0,t.jsx)(ep,{className:"text-center text-gray-500 font-mono text-sm",children:r+1}),v.map(r=>{let l=s.columns.find(e=>e.displayName===r),i=a.has((null==l?void 0:l.name)||"");return(0,t.jsx)(ep,{className:"".concat(i?"bg-blue-50":""," ").concat(null===e[r]?"bg-red-50":""),children:w(e[r])},r)})]},r))})]})})]}),a.size>0&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-green-800",children:[(0,t.jsx)(k.Z,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"font-medium",children:[a.size," column",1!==a.size?"s":""," selected for form generation"]})]}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:Array.from(a).map(e=>{let a=s.columns.find(s=>s.name===e);return(0,t.jsxs)(p,{variant:"secondary",className:"text-xs",children:[y((null==a?void 0:a.dataType)||"")," ",null==a?void 0:a.displayName]},e)})})]}),0===a.size&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-yellow-800",children:[(0,t.jsx)(ey.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"No columns selected"})]}),(0,t.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Click on column headers or use the checkboxes to select columns for your form."})]})]})]})]})}function ew(e){let{user:s}=e,[a,l]=(0,r.useState)(""),[i,n]=(0,r.useState)(""),[c,f]=(0,r.useState)([]),[j,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(0),[N,w]=(0,r.useState)(null),[b,C]=(0,r.useState)(new Set),S=(0,r.useRef)(null),{toast:F}=(0,er.pm)(),k=async e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){g(!0),y(0);try{let e=setInterval(()=>{y(s=>s>=90?(clearInterval(e),90):s+10)},200),s=await el.processFile(a);clearInterval(e),y(100),w(s);let t=new Set(s.columns.map(e=>e.name));C(t);let r=el.generateFormFromColumns(s.columns,s.filename);l(r.title),n(r.description),f(r.fields),F({title:"Excel File Processed Successfully",description:"Analyzed ".concat(s.columnCount," columns from ").concat(s.rowCount," rows. Review and customize the generated fields.")})}catch(e){F({title:"Upload Failed",description:e instanceof Error?e.message:"Failed to process Excel file. Please try again.",variant:"destructive"})}finally{g(!1),setTimeout(()=>y(0),1e3)}}},E=(e,s)=>{f(c.map(a=>a.id===e?{...a,...s}:a))},R=e=>{if(f(c.filter(s=>s.id!==e)),N){let a=c.find(s=>s.id===e);if(a){var s;let e=null===(s=N.columns.find(e=>e.displayName===a.label))||void 0===s?void 0:s.name;if(e){let s=new Set(b);s.delete(e),C(s)}}}},D=async()=>{if(!a.trim()){F({title:"Form Title Required",description:"Please enter a title for your form.",variant:"destructive"});return}if(0===c.length){F({title:"No Fields Added",description:"Please add at least one field to your form.",variant:"destructive"});return}try{let e=await fetch("/api/forms/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,description:i,fields:c,settings:{allowMultipleSubmissions:!0,requireAuthentication:!0}})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to create form")}await e.json(),F({title:"Form Created Successfully",description:'Form "'.concat(a,'" has been saved and is ready for deployment.')}),l(""),n(""),f([]),w(null),C(new Set)}catch(e){F({title:"Save Failed",description:e instanceof Error?e.message:"Failed to save form. Please try again.",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Create New Form"}),(0,t.jsx)(x,{children:"Upload an Excel template or create a form from scratch using pandas-powered analysis"})]}),(0,t.jsxs)(h,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(X.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)(O,{htmlFor:"excel-upload",className:"cursor-pointer",children:[(0,t.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload Excel Template"}),(0,t.jsx)("span",{className:"mt-1 block text-sm text-gray-500",children:"Automatically extract and analyze form fields using pandas"})]}),(0,t.jsx)(Z,{id:"excel-upload",ref:S,type:"file",accept:".xlsx,.xls,.csv",onChange:k,className:"hidden"}),(0,t.jsxs)(d,{variant:"outline",className:"mt-4 bg-transparent",onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},disabled:j,children:[(0,t.jsx)(K.Z,{className:"mr-2 h-4 w-4"}),j?"Processing...":"Choose Excel File"]})]})]}),j&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsx)(W,{value:v,className:"w-full"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Processing with pandas... ",v,"%"]})]})]}),N&&(0,t.jsx)(eN,{data:N,selectedColumns:b,onColumnToggle:e=>{let s=new Set(b);s.has(e)?s.delete(e):s.add(e),C(s),N&&f(N.columns.filter(e=>s.has(e.name)).map(e=>el.mapColumnToFormField(e)))},onGenerateForm:()=>{if(0===b.size){F({title:"No Columns Selected",description:"Please select at least one column to generate the form.",variant:"destructive"});return}let e=N.columns.filter(e=>b.has(e.name)),s=el.generateFormFromColumns(e,N.filename);l(s.title),n(s.description),f(s.fields),F({title:"Form Generated",description:"Created form with ".concat(b.size," fields. You can now customize and save it.")})}}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"form-title",children:"Form Title"}),(0,t.jsx)(Z,{id:"form-title",value:a,onChange:e=>l(e.target.value),placeholder:"Enter form title"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"form-description",children:"Description"}),(0,t.jsx)(Z,{id:"form-description",value:i,onChange:e=>n(e.target.value),placeholder:"Brief description of the form"})]})]})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u,{children:"Form Fields"}),(0,t.jsx)(x,{children:N?"Fields generated from Excel analysis. You can modify or add more.":"Configure your form fields and validation"})]}),(0,t.jsxs)(d,{onClick:()=>{f([...c,{id:"field_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),label:"New Field",type:"text",required:!1,placeholder:"Enter value"}])},size:"sm",children:[(0,t.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Add Manual Field"]})]}),(0,t.jsx)(h,{children:0===c.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No fields added yet. Upload an Excel template or add fields manually."}):(0,t.jsx)("div",{className:"space-y-4",children:c.map(e=>{var s;return(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p,{variant:"outline",children:e.type}),N&&(0,t.jsxs)(p,{variant:"secondary",children:[(0,t.jsx)(ee.Z,{className:"h-3 w-3 mr-1"}),"Auto-detected"]})]}),(0,t.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>R(e.id),children:(0,t.jsx)(es.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{children:"Field Label"}),(0,t.jsx)(Z,{value:e.label,onChange:s=>E(e.id,{label:s.target.value}),placeholder:"Field label"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{children:"Field Type"}),(0,t.jsxs)(_,{value:e.type,onValueChange:s=>E(e.id,{type:s}),children:[(0,t.jsx)(V,{children:(0,t.jsx)(M,{})}),(0,t.jsxs)(J,{children:[(0,t.jsx)(B,{value:"text",children:"Text"}),(0,t.jsx)(B,{value:"number",children:"Number"}),(0,t.jsx)(B,{value:"email",children:"Email"}),(0,t.jsx)(B,{value:"date",children:"Date"}),(0,t.jsx)(B,{value:"select",children:"Dropdown"}),(0,t.jsx)(B,{value:"textarea",children:"Text Area"}),(0,t.jsx)(B,{value:"checkbox",children:"Checkbox"}),(0,t.jsx)(B,{value:"radio",children:"Radio Button"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{children:"Placeholder"}),(0,t.jsx)(Z,{value:e.placeholder||"",onChange:s=>E(e.id,{placeholder:s.target.value}),placeholder:"Placeholder text"})]})]}),("select"===e.type||"radio"===e.type)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{children:"Options (comma-separated)"}),(0,t.jsx)(Z,{value:(null===(s=e.options)||void 0===s?void 0:s.join(", "))||"",onChange:s=>E(e.id,{options:s.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"Option 1, Option 2, Option 3"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Q,{checked:e.required,onCheckedChange:s=>E(e.id,{required:s})}),(0,t.jsx)(O,{children:"Required field"})]})]},e.id)})})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsxs)(d,{variant:"outline",children:[(0,t.jsx)(ea.Z,{className:"mr-2 h-4 w-4"}),"Preview"]}),(0,t.jsxs)(d,{onClick:D,children:[(0,t.jsx)(et.Z,{className:"mr-2 h-4 w-4"}),"Save Form"]})]})]})}let eb=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});eb.displayName="Textarea";var eC=a(3274);function eS(e){let{user:s}=e,[a,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(0),[c,f]=(0,r.useState)(null),[j,g]=(0,r.useState)(null),[v,y]=(0,r.useState)({}),N=(0,r.useRef)(null),{toast:w}=(0,er.pm)(),b=async e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;let t=new FileReader;t.onload=e=>{var s;g(null===(s=e.target)||void 0===s?void 0:s.result)},t.readAsDataURL(a),l(!0),n(0);try{let e=new FormData;e.append("file",a);let s=setInterval(()=>{n(e=>e>=90?(clearInterval(s),90):e+5)},100),t=await fetch("/api/ocr/process",{method:"POST",body:e});if(clearInterval(s),n(100),!t.ok){let e=await t.json();throw Error(e.error||"Failed to process image")}let r=(await t.json()).data;f(r),y(r.fields),w({title:"OCR Processing Complete",description:"Text extracted with ".concat(mockResult.confidence,"% confidence. Review and edit as needed.")})}catch(e){w({title:"OCR Processing Failed",description:"Failed to process the image. Please try again.",variant:"destructive"})}finally{l(!1)}},C=(e,s)=>{y(a=>({...a,[e]:s}))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"OCR Document Digitization"}),(0,t.jsx)(x,{children:"Upload or capture images of printed documents to extract text and data automatically"})]}),(0,t.jsxs)(h,{className:"space-y-6",children:[(0,t.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(R.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)(O,{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,t.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload Document Image"}),(0,t.jsx)("span",{className:"mt-1 block text-sm text-gray-500",children:"Supports JPG, PNG, PDF files. Best results with clear, well-lit images."})]}),(0,t.jsx)(Z,{id:"image-upload",ref:N,type:"file",accept:"image/*,.pdf",onChange:b,className:"hidden"}),(0,t.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,t.jsxs)(d,{variant:"outline",onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},disabled:a,children:[(0,t.jsx)(K.Z,{className:"mr-2 h-4 w-4"}),"Upload File"]}),(0,t.jsxs)(d,{variant:"outline",disabled:a,children:[(0,t.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),"Take Photo"]})]})]})]})}),a&&(0,t.jsx)(o,{children:(0,t.jsx)(h,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eC.Z,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Processing document with Tesseract.js OCR..."})]}),(0,t.jsx)(W,{value:i,className:"w-full"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Extracting text and identifying form fields. This may take a few moments."})]})})}),j&&(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{children:(0,t.jsx)(u,{className:"text-lg",children:"Uploaded Document"})}),(0,t.jsx)(h,{children:(0,t.jsx)("div",{className:"max-w-md mx-auto",children:(0,t.jsx)("img",{src:j||"/placeholder.svg",alt:"Uploaded document",className:"w-full h-auto border rounded-lg shadow-sm"})})})]})]})]}),c&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)(u,{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Extracted Text"}),(0,t.jsxs)(p,{variant:c.confidence>80?"default":"secondary",children:[c.confidence,"% confidence"]})]})}),(0,t.jsx)(h,{children:(0,t.jsx)(eb,{value:c.text,readOnly:!0,className:"min-h-[300px] font-mono text-sm"})})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(u,{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Extracted Fields"})]}),(0,t.jsx)(x,{children:"Review and edit the automatically extracted form data"})]}),(0,t.jsxs)(h,{className:"space-y-4",children:[Object.entries(v).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:s,children:s}),(0,t.jsx)(Z,{id:s,value:a,onChange:e=>C(s,e.target.value),placeholder:"Enter ".concat(s.toLowerCase())})]},s)}),(0,t.jsx)("div",{className:"pt-4 border-t",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,t.jsx)(ey.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Please review all fields for accuracy before submitting"})]})})]})]})]}),c&&(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)(d,{variant:"outline",onClick:()=>{f(null),g(null),y({})},children:"Clear"}),(0,t.jsxs)(d,{onClick:()=>{w({title:"Data Submitted",description:"Extracted data has been saved and synced to Google Sheets."}),f(null),g(null),y({}),n(0)},children:[(0,t.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Submit Data"]})]})]})}var eF=a(9497),ek=a(8165);let eE=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(eF.fC,{className:(0,n.cn)("grid gap-2",a),...r,ref:s})});eE.displayName=eF.fC.displayName;let eT=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(eF.ck,{ref:s,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,t.jsx)(eF.z$,{className:"flex items-center justify-center",children:(0,t.jsx)(ek.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});eT.displayName=eF.ck.displayName;var eR=a(8094),eD=a(9333),eP=a(6653);function eZ(e){let{user:s}=e,[a,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(0),[c,f]=(0,r.useState)([]),[j,g]=(0,r.useState)({}),[v,y]=(0,r.useState)({name:"",id:"",location:""}),[N,w]=(0,r.useState)(null),[b,C]=(0,r.useState)(!1),{toast:S}=(0,er.pm)();(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/questions");if(!e.ok)throw Error("Failed to fetch questions");let s=await e.json();f(s.questions)}catch(e){S({title:"Error fetching questions",description:e instanceof Error?e.message:"An unknown error occurred",variant:"destructive"})}})()},[S]);let F=c[i],T=c.length>0?(i+1)/c.length*100:0,P=async()=>{if(!v.name.trim()){S({title:"Interviewee Information Required",description:"Please enter the interviewee's name before starting.",variant:"destructive"});return}try{let e=await fetch("/api/interviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!e.ok)throw Error("Failed to start interview");let s=await e.json();w(s.interview.id),l(!0),n(0),g({})}catch(e){S({title:"Error starting interview",description:e instanceof Error?e.message:"An unknown error occurred",variant:"destructive"})}},A=async(e,s)=>{if(g(a=>({...a,[e]:s})),N)try{await fetch("/api/interviews/".concat(N,"/answers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:e,value:s})})}catch(e){console.error("Failed to save answer:",e),S({title:"Error saving answer",description:"Your answer could not be saved. Please check your connection.",variant:"destructive"})}},I=async()=>{if(F){if(F.required&&!j[F.id]){S({title:"Answer Required",description:"Please answer this question before proceeding.",variant:"destructive"});return}i<c.length-1?n(e=>e+1):await z()}},z=async()=>{if(N)try{await fetch("/api/interviews/".concat(N),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})}),S({title:"Interview Completed",description:"All responses have been saved."}),l(!1),n(0),g({}),w(null)}catch(e){console.error("Failed to complete interview:",e),S({title:"Error completing interview",description:"Could not finalize interview. Please try again.",variant:"destructive"})}},U=async()=>{if(N)try{await fetch("/api/interviews/".concat(N),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"saved"})}),S({title:"Progress Saved",description:"Interview progress has been saved. You can resume later."})}catch(e){console.error("Failed to save progress:",e),S({title:"Error saving progress",description:"Could not save progress. Please try again.",variant:"destructive"})}};return a?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o,{children:(0,t.jsxs)(m,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(u,{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Interview in Progress"})]}),(0,t.jsxs)(x,{children:["Interviewing: ",v.name,v.location&&" • Location: ".concat(v.location)]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(p,{variant:"outline",children:[(0,t.jsx)(E.Z,{className:"mr-1 h-3 w-3"}),"Question ",i+1," of ",c.length]}),b&&(0,t.jsxs)(p,{variant:"destructive",children:[(0,t.jsx)(eD.Z,{className:"mr-1 h-3 w-3"}),"Recording"]})]})]}),(0,t.jsx)(W,{value:T,className:"mt-4"})]})}),(!F.condition||j[F.condition.dependsOn]===F.condition.value)&&(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)(u,{className:"text-lg",children:[F.question,F.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]})}),(0,t.jsxs)(h,{className:"space-y-6",children:[(e=>{var s,a,r;let l=j[e.id];switch(e.type){case"multiple-choice":case"yes-no":return(0,t.jsx)(eE,{value:l||"",onValueChange:s=>A(e.id,s),children:null===(s=e.options)||void 0===s?void 0:s.map(s=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eT,{value:s,id:"".concat(e.id,"-").concat(s)}),(0,t.jsx)(O,{htmlFor:"".concat(e.id,"-").concat(s),children:s})]},s))});case"checkbox":return(0,t.jsx)("div",{className:"space-y-2",children:null===(a=e.options)||void 0===a?void 0:a.map(s=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(en,{id:"".concat(e.id,"-").concat(s),checked:(null==l?void 0:l.includes(s))||!1,onCheckedChange:a=>{let t=l||[];a?A(e.id,[...t,s]):A(e.id,t.filter(e=>e!==s))}}),(0,t.jsx)(O,{htmlFor:"".concat(e.id,"-").concat(s),children:s})]},s))});case"rating":return(0,t.jsx)(eE,{value:l||"",onValueChange:s=>A(e.id,s),className:"flex space-x-4",children:null===(r=e.options)||void 0===r?void 0:r.map(s=>(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(eT,{value:s,id:"".concat(e.id,"-").concat(s)}),(0,t.jsx)(O,{htmlFor:"".concat(e.id,"-").concat(s),className:"text-sm",children:s})]},s))});case"text":return(0,t.jsx)(eb,{value:l||"",onChange:s=>A(e.id,s.target.value),placeholder:"Enter your response...",className:"min-h-[100px]"});default:return null}})(F),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)(O,{className:"text-sm font-medium",children:"Optional Attachments"}),(0,t.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,t.jsxs)(d,{variant:"outline",size:"sm",children:[(0,t.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),"Take Photo"]}),(0,t.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>C(!b),children:[(0,t.jsx)(eD.Z,{className:"mr-2 h-4 w-4"}),b?"Stop Recording":"Voice Note"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(d,{variant:"outline",onClick:()=>{i>0&&n(e=>e-1)},disabled:0===i,children:"Previous"}),(0,t.jsxs)(d,{variant:"outline",onClick:U,children:[(0,t.jsx)(et.Z,{className:"mr-2 h-4 w-4"}),"Save Progress"]})]}),(0,t.jsx)(d,{onClick:I,children:i===c.length-1?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Complete Interview"]}):(0,t.jsxs)(t.Fragment,{children:["Next",(0,t.jsx)(eP.Z,{className:"ml-2 h-4 w-4"})]})})]})]}):(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"QCM Field Interview"}),(0,t.jsx)(x,{children:"Conduct structured interviews with multiple choice questions and conditional logic"})]}),(0,t.jsxs)(h,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"interviewee-name",children:"Interviewee Name *"}),(0,t.jsx)(Z,{id:"interviewee-name",value:v.name,onChange:e=>y(s=>({...s,name:e.target.value})),placeholder:"Enter full name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"interviewee-id",children:"ID Number"}),(0,t.jsx)(Z,{id:"interviewee-id",value:v.id,onChange:e=>y(s=>({...s,id:e.target.value})),placeholder:"Government ID or reference"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"interview-location",children:"Location"}),(0,t.jsx)(Z,{id:"interview-location",value:v.location,onChange:e=>y(s=>({...s,location:e.target.value})),placeholder:"Interview location"})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,t.jsx)("h3",{className:"font-medium mb-3",children:"Interview Preview"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total Questions:"})," ",c.length]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Estimated Time:"})," 5-10 minutes"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Features:"})," Auto-save, Media attachments, Conditional logic"]})]})]}),(0,t.jsxs)(d,{onClick:P,className:"w-full",size:"lg",children:[(0,t.jsx)(eR.Z,{className:"mr-2 h-5 w-5"}),"Start Interview"]})]})]})})}var eA=a(8484);let eI=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:l=!0,...i}=e;return(0,t.jsx)(eA.f,{ref:s,decorative:l,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});eI.displayName=eA.f.displayName;var eO=a(1726),ez=a(6706),eU=a(3787);function eL(e){let{user:s}=e,[a,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)([]);useEffect(()=>{(async()=>{try{let e=await fetch("/api/google-sheets");if(!e.ok)throw Error("Failed to fetch connections");let s=await e.json();n(s.connections)}catch(e){j({title:"Error fetching connections",description:e instanceof Error?e.message:"An unknown error occurred",variant:"destructive"})}})()},[j]);let[c,f]=(0,r.useState)({name:"",sheetUrl:"",formType:""}),{toast:j}=(0,er.pm)(),g=async()=>{l(!0);try{await new Promise(e=>setTimeout(e,2e3)),j({title:"Google Account Connected",description:"Successfully connected to Google Sheets. You can now create new connections."})}catch(e){j({title:"Connection Failed",description:"Failed to connect to Google account. Please try again.",variant:"destructive"})}finally{l(!1)}},v=async()=>{if(!c.name||!c.sheetUrl||!c.formType){j({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{let e=await fetch("/api/google-sheets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.name,sheetId:y(c.sheetUrl),formType:c.formType})});if(!e.ok)throw Error("Failed to create connection");let s=await e.json();n(e=>[...e,s.connection]),f({name:"",sheetUrl:"",formType:""}),j({title:"Connection Created",description:"New Google Sheets connection has been established."})}catch(e){console.error("Create connection error:",e),j({title:"Connection Failed",description:e instanceof Error?e.message:"An unknown error occurred",variant:"destructive"})}},y=e=>{let s=e.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return s?s[1]:e},N=async e=>{n(i.map(s=>s.id===e?{...s,status:"syncing"}:s));try{let s=await fetch("/api/google-sheets/".concat(e,"/sync"),{method:"POST"});if(!s.ok)throw Error("Failed to sync data");let a=await s.json();n(i.map(s=>s.id===e?{...s,status:"connected",lastSync:a.connection.lastSync}:s)),j({title:"Sync Complete",description:"Data has been successfully synced to Google Sheets."})}catch(s){n(i.map(s=>s.id===e?{...s,status:"error",lastSync:"Failed"}:s)),j({title:"Sync Failed",description:s instanceof Error?s.message:"Failed to sync data to Google Sheets. Please check your connection.",variant:"destructive"})}},w=async e=>{let s=i.find(s=>s.id===e);if(s)try{if(!(await fetch("/api/google-sheets/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autoSync:!s.autoSync})})).ok)throw Error("Failed to update auto-sync setting");n(i.map(s=>s.id===e?{...s,autoSync:!s.autoSync}:s)),j({title:"Auto-sync Updated",description:"Auto-sync ".concat(s.autoSync?"disabled":"enabled"," for ").concat(s.name,".")})}catch(e){console.error("Toggle auto-sync error:",e),j({title:"Update Failed",description:e instanceof Error?e.message:"Failed to update auto-sync. Please try again.",variant:"destructive"})}},b=async e=>{if(confirm("Are you sure you want to delete this connection?"))try{if(!(await fetch("/api/google-sheets/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete connection");n(i.filter(s=>s.id!==e)),j({title:"Connection Removed",description:"Google Sheets connection has been deleted."})}catch(e){console.error("Delete connection error:",e),j({title:"Deletion Failed",description:e instanceof Error?e.message:"Failed to delete connection. Please try again.",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Google Sheets Integration"}),(0,t.jsx)(x,{children:"Connect your Google account to automatically sync form data to spreadsheets"})]}),(0,t.jsxs)(h,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(eO.Z,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Google Account"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.email})]})]}),(0,t.jsxs)(p,{variant:"default",children:[(0,t.jsx)(k.Z,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),(0,t.jsxs)(d,{variant:"outline",onClick:g,disabled:a,children:[(0,t.jsx)(ez.Z,{className:"mr-2 h-4 w-4 ".concat(a?"animate-spin":"")}),a?"Reconnecting...":"Reconnect Account"]})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Create New Connection"}),(0,t.jsx)(x,{children:"Link a form type to a specific Google Sheet for automatic data sync"})]}),(0,t.jsxs)(h,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"connection-name",children:"Connection Name"}),(0,t.jsx)(Z,{id:"connection-name",value:c.name,onChange:e=>f(s=>({...s,name:e.target.value})),placeholder:"e.g., Employee Forms"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"sheet-url",children:"Google Sheets URL"}),(0,t.jsx)(Z,{id:"sheet-url",value:c.sheetUrl,onChange:e=>f(s=>({...s,sheetUrl:e.target.value})),placeholder:"https://docs.google.com/spreadsheets/d/..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"form-type",children:"Form Type"}),(0,t.jsxs)(_,{value:c.formType,onValueChange:e=>f(s=>({...s,formType:e})),children:[(0,t.jsx)(V,{children:(0,t.jsx)(M,{placeholder:"Select form type"})}),(0,t.jsxs)(J,{children:[(0,t.jsx)(B,{value:"Employee Registration",children:"Employee Registration"}),(0,t.jsx)(B,{value:"Service Request",children:"Service Request"}),(0,t.jsx)(B,{value:"OCR Processing",children:"OCR Processing"}),(0,t.jsx)(B,{value:"QCM Interview",children:"QCM Interview"}),(0,t.jsx)(B,{value:"Custom Form",children:"Custom Form"})]})]})]})]}),(0,t.jsxs)(d,{onClick:v,children:[(0,t.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Create Connection"]})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Active Connections"}),(0,t.jsx)(x,{children:"Manage your Google Sheets connections and sync settings"})]}),(0,t.jsx)(h,{children:0===i.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No connections configured yet. Create your first connection above."}):(0,t.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Form Type: ",e.formType]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)(p,{variant:"connected"===e.status?"default":"syncing"===e.status?"secondary":"destructive",children:["connected"===e.status&&(0,t.jsx)(k.Z,{className:"w-3 h-3 mr-1"}),"syncing"===e.status&&(0,t.jsx)(ez.Z,{className:"w-3 h-3 mr-1 animate-spin"}),"error"===e.status&&(0,t.jsx)(ey.Z,{className:"w-3 h-3 mr-1"}),e.status]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(O,{className:"text-xs text-gray-500",children:"SHEET ID"}),(0,t.jsxs)("p",{className:"font-mono",children:[e.sheetId.substring(0,20),"..."]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(O,{className:"text-xs text-gray-500",children:"LAST SYNC"}),(0,t.jsx)("p",{children:e.lastSync?new Date(e.lastSync).toLocaleString():"Never"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(O,{className:"text-xs text-gray-500",children:"AUTO SYNC"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,t.jsx)(Q,{checked:e.autoSync,onCheckedChange:()=>w(e.id)}),(0,t.jsx)("span",{className:"text-xs",children:e.autoSync?"Enabled":"Disabled"})]})]})]}),(0,t.jsx)(eI,{}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>N(e.id),disabled:"syncing"===e.status,children:[(0,t.jsx)(ez.Z,{className:"mr-2 h-3 w-3 ".concat("syncing"===e.status?"animate-spin":"")}),"Sync Now"]}),(0,t.jsxs)(d,{variant:"outline",size:"sm",children:[(0,t.jsx)(eU.Z,{className:"mr-2 h-3 w-3"}),"Open Sheet"]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(d,{variant:"outline",size:"sm",children:(0,t.jsx)(C.Z,{className:"h-3 w-3"})}),(0,t.jsx)(d,{variant:"outline",size:"sm",onClick:()=>b(e.id),children:"Delete"})]})]})]},e.id))})})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Sync Statistics"}),(0,t.jsx)(x,{children:"Overview of data synchronization activity"})]}),(0,t.jsx)(h,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i.filter(e=>"connected"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Active Connections"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:i.filter(e=>"syncing"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Syncs"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:i.filter(e=>"error"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Failed Syncs"})]})]})})]})]})}var eq=a(1485);let e_=eq.fC,eM=eq.xz,eV=r.forwardRef((e,s)=>{let{className:a,align:r="center",sideOffset:l=4,...i}=e;return(0,t.jsx)(eq.h_,{children:(0,t.jsx)(eq.VY,{ref:s,align:r,sideOffset:l,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});eV.displayName=eq.VY.displayName;var eG=a(6600),eY=a(4697);function eJ(e){let{notifications:s}=e,[a,l]=(0,r.useState)(s),[i,n]=(0,r.useState)(!1),c=a.filter(e=>!e.read).length,f=e=>{l(a.map(s=>s.id===e?{...s,read:!0}:s))},j=e=>{l(a.filter(s=>s.id!==e))},g=e=>{switch(e){case"submission":return(0,t.jsx)(k.Z,{className:"h-4 w-4 text-green-600"});case"reminder":return(0,t.jsx)(E.Z,{className:"h-4 w-4 text-yellow-600"});case"sync":return(0,t.jsx)(ee.Z,{className:"h-4 w-4 text-blue-600"});case"error":return(0,t.jsx)(S.Z,{className:"h-4 w-4 text-red-600"});default:return(0,t.jsx)(ee.Z,{className:"h-4 w-4 text-gray-600"})}};return(0,t.jsxs)(e_,{open:i,onOpenChange:n,children:[(0,t.jsx)(eM,{asChild:!0,children:(0,t.jsxs)(d,{variant:"outline",size:"sm",className:"relative bg-transparent",children:[(0,t.jsx)(eG.Z,{className:"h-4 w-4"}),c>0&&(0,t.jsx)(p,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:c})]})}),(0,t.jsx)(eV,{className:"w-80 p-0",align:"end",children:(0,t.jsxs)(o,{className:"border-0 shadow-none",children:[(0,t.jsxs)(m,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(u,{className:"text-lg",children:"Notifications"}),c>0&&(0,t.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{l(a.map(e=>({...e,read:!0})))},children:"Mark all read"})]}),(0,t.jsx)(x,{children:c>0?"".concat(c," unread notifications"):"All caught up!"})]}),(0,t.jsx)(eI,{}),(0,t.jsx)(h,{className:"p-0",children:(0,t.jsx)(ed,{className:"h-80",children:0===a.length?(0,t.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No notifications yet"}):(0,t.jsx)("div",{className:"space-y-1",children:a.map(e=>(0,t.jsx)("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-l-4 ".concat(e.read?"border-l-transparent bg-gray-50/50":"border-l-blue-500 bg-white"),onClick:()=>f(e.id),children:(0,t.jsxs)("div",{className:"flex items-start justify-between space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-2 flex-1",children:[g(e.type),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm ".concat(e.read?"text-gray-600":"text-gray-900 font-medium"),children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.time})]})]}),(0,t.jsx)(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",onClick:s=>{s.stopPropagation(),j(e.id)},children:(0,t.jsx)(eY.Z,{className:"h-3 w-3"})})]})},e.id))})})})]})})]})}var eB=a(3304);let eH=eB.fC,eQ=eB.xz,e$=eB.h_;eB.x8;let eW=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(eB.aV,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});eW.displayName=eB.aV.displayName;let eX=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(e$,{children:[(0,t.jsx)(eW,{}),(0,t.jsxs)(eB.VY,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,t.jsxs)(eB.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(eY.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eX.displayName=eB.VY.displayName;let eK=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};eK.displayName="DialogHeader";let e0=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};e0.displayName="DialogFooter";let e2=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(eB.Dx,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});e2.displayName=eB.Dx.displayName;let e4=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(eB.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});e4.displayName=eB.dk.displayName;let e1=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),e6=r.forwardRef((e,s)=>{let{className:a,variant:r,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(e1({variant:r}),a),...l})});e6.displayName="Alert",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let e5=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});e5.displayName="AlertDescription";var e3=a(5489),e8=a(6463);function e9(){let[e,s]=(0,r.useState)(null),[a,t]=(0,r.useState)(!0),l=(0,e8.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let a=await e.json();s(a.user)}}catch(e){console.error("Failed to fetch session:",e)}finally{t(!1)}})()},[]);let i=async(a,t)=>{if(!e)return{success:!1,error:"No user logged in"};try{let r=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,currentPassword:a,newPassword:t})}),l=await r.json();if(r.ok)return s({...e,isDefaultPassword:!1}),{success:!0};throw Error(l.error||"Failed to change password")}catch(e){return console.error("Change password failed:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},n=async s=>{if(!e||"ADMIN"!==e.role)return{success:!1,error:"Unauthorized"};try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await e.json();if(e.ok)return{success:!0,user:a.user,defaultPassword:a.defaultPassword};throw Error(a.error||"Failed to create user")}catch(e){return console.error("Create user failed:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},c=async()=>{if(!e||"ADMIN"!==e.role)return[];try{let e=await fetch("/api/users");if(e.ok)return(await e.json()).users;throw Error(e.statusText)}catch(e){return console.error("Get all users failed:",e),[]}},d=async(s,a)=>{if(!e||"ADMIN"!==e.role)return{success:!1,error:"Unauthorized"};try{let e=await fetch("/api/users/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();if(e.ok)return{success:!0};throw Error(t.error||"Failed to update user")}catch(e){return console.error("Update user failed:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},o=async s=>{if(!e||"ADMIN"!==e.role)return{success:!1,error:"Unauthorized"};try{let e=await fetch("/api/users/".concat(s),{method:"DELETE"}),a=await e.json();if(e.ok)return{success:!0};throw Error(a.error||"Failed to delete user")}catch(e){return console.error("Delete user failed:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}};return{user:e,loading:a,login:async e=>{t(!0);try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await a.json();if(a.ok)return s(t.user),{success:!0,requiresPasswordChange:t.user.isDefaultPassword};throw Error(t.error||"Login failed")}catch(e){return console.error("Login failed:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}finally{t(!1)}},logout:async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),s(null),l.push("/login")}catch(e){console.error("Logout failed:",e)}},changePassword:i,createUser:n,getAllUsers:c,updateUser:d,deleteUser:o}}function e7(e){let{open:s,onOpenChange:a,required:l=!1}=e,[i,n]=(0,r.useState)(""),[c,o]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),{changePassword:f}=e9(),{toast:p}=(0,er.pm)(),j=async e=>{if(e.preventDefault(),c!==m){p({title:"Password Mismatch",description:"New password and confirmation do not match",variant:"destructive"});return}if(c.length<6){p({title:"Password Too Short",description:"Password must be at least 6 characters long",variant:"destructive"});return}h(!0);try{let e=await f(i,c);e.success?(p({title:"Password Changed",description:"Your password has been updated successfully"}),a(!1),n(""),o(""),u("")):p({title:"Password Change Failed",description:e.error||"Failed to change password",variant:"destructive"})}catch(e){p({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{h(!1)}};return(0,t.jsxs)(eH,{open:s,onOpenChange:a,children:[" ",(0,t.jsxs)(eX,{className:"sm:max-w-md",children:[(0,t.jsxs)(eK,{children:[(0,t.jsxs)(e2,{className:"flex items-center space-x-2",children:[(0,t.jsx)(e3.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Change Password"})]}),(0,t.jsx)(e4,{children:l?"For security reasons, we recommend changing your default password.":"Update your password to keep your account secure."})]}),l&&(0,t.jsxs)(e6,{className:"border-orange-200 bg-orange-50",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4 text-orange-600"}),(0,t.jsxs)(e5,{className:"text-orange-800",children:[(0,t.jsx)("strong",{children:"Security Recommendation:"})," You are using the default password. Please change it for better security."]})]}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"current-password",children:"Current Password"}),(0,t.jsx)(Z,{id:"current-password",type:"password",value:i,onChange:e=>n(e.target.value),placeholder:"Enter current password",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"new-password",children:"New Password"}),(0,t.jsx)(Z,{id:"new-password",type:"password",value:c,onChange:e=>o(e.target.value),placeholder:"Enter new password (min 6 characters)",required:!0,minLength:6})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,t.jsx)(Z,{id:"confirm-password",type:"password",value:m,onChange:e=>u(e.target.value),placeholder:"Confirm new password",required:!0})]}),(0,t.jsxs)(e0,{className:"flex space-x-2",children:[(0,t.jsx)(d,{type:"button",variant:"outline",onClick:()=>a(!1),children:l?"Skip for Now":"Cancel"}),(0,t.jsx)(d,{type:"submit",disabled:x,children:x?"Changing...":"Change Password"})]})]})]})]})}var se=a(500),ss=a(6649),sa=a(2022),st=a(8279),sr=a(9099),sl=a(6884);function si(e){let{user:s}=e,[a,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!1),[c,f]=(0,r.useState)(!1),[j,g]=(0,r.useState)(null),[v,y]=(0,r.useState)({name:"",email:"",role:"FILLER",govId:""}),{createUser:N,getAllUsers:w,updateUser:b,deleteUser:C}=e9(),{toast:S}=(0,er.pm)();(0,r.useEffect)(()=>{F()},[]);let F=async()=>{l(await w())},k=async e=>{if(e.preventDefault(),!v.name||!v.email||!v.role){S({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}let s=await N(v);s.success?(S({title:"User Created",description:"User created successfully. Default password: ".concat(s.defaultPassword)}),n(!1),y({name:"",email:"",role:"FILLER",govId:""}),F()):S({title:"Creation Failed",description:s.error||"Failed to create user",variant:"destructive"})},E=async e=>{if(e.preventDefault(),!j)return;let s=await b(j.id,{name:j.name,email:j.email,role:j.role});s.success?(S({title:"User Updated",description:"User information has been updated successfully"}),f(!1),g(null),F()):S({title:"Update Failed",description:s.error||"Failed to update user",variant:"destructive"})},R=async(e,s)=>{if(!confirm('Are you sure you want to delete user "'.concat(s,'"? This action cannot be undone.')))return;let a=await C(e);a.success?(S({title:"User Deleted",description:"User has been removed from the system"}),F()):S({title:"Deletion Failed",description:a.error||"Failed to delete user",variant:"destructive"})},P=e=>{navigator.clipboard.writeText(e),S({title:"Copied",description:"Text copied to clipboard"})},A=e=>{switch(e){case"ADMIN":return(0,t.jsx)(se.Z,{className:"h-4 w-4 text-red-600"});case"EDITOR":return(0,t.jsx)(ss.Z,{className:"h-4 w-4 text-blue-600"});case"FILLER":return(0,t.jsx)(sa.Z,{className:"h-4 w-4 text-green-600"});case"VIEWER":return(0,t.jsx)(st.Z,{className:"h-4 w-4 text-gray-600"});default:return(0,t.jsx)(sa.Z,{className:"h-4 w-4"})}},I=e=>{switch(e){case"ADMIN":return"destructive";case"EDITOR":return"default";case"FILLER":return"secondary";default:return"outline"}};return"ADMIN"!==s.role?(0,t.jsx)(o,{children:(0,t.jsx)(h,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center text-gray-500",children:[(0,t.jsx)(sr.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,t.jsx)("p",{children:"Access Denied"}),(0,t.jsx)("p",{className:"text-sm",children:"Only administrators can manage users"})]})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(u,{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"User Management"})]}),(0,t.jsx)(x,{children:"Create and manage user accounts with different access levels"})]}),(0,t.jsxs)(eH,{open:i,onOpenChange:n,children:[(0,t.jsx)(eQ,{asChild:!0,children:(0,t.jsxs)(d,{children:[(0,t.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Create User"]})}),(0,t.jsxs)(eX,{className:"sm:max-w-md",children:[(0,t.jsxs)(eK,{children:[(0,t.jsx)(e2,{children:"Create New User"}),(0,t.jsx)(e4,{children:"Add a new user to the system with specified role and permissions"})]}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"create-name",children:"Full Name *"}),(0,t.jsx)(Z,{id:"create-name",value:v.name,onChange:e=>y(s=>({...s,name:e.target.value})),placeholder:"Enter full name",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"create-email",children:"Email Address *"}),(0,t.jsx)(Z,{id:"create-email",type:"email",value:v.email,onChange:e=>y(s=>({...s,email:e.target.value})),placeholder:"user@gov.org",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"create-role",children:"Role *"}),(0,t.jsxs)(_,{value:v.role,onValueChange:e=>y(s=>({...s,role:e})),children:[(0,t.jsx)(V,{children:(0,t.jsx)(M,{})}),(0,t.jsxs)(J,{children:[(0,t.jsx)(B,{value:"ADMIN",children:"Administrator - Full access"}),(0,t.jsx)(B,{value:"EDITOR",children:"Editor - Create/edit forms"}),(0,t.jsx)(B,{value:"FILLER",children:"Filler - Fill assigned forms"}),(0,t.jsx)(B,{value:"VIEWER",children:"Viewer - Read-only access"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"create-govid",children:"Government ID (Optional)"}),(0,t.jsx)(Z,{id:"create-govid",value:v.govId,onChange:e=>y(s=>({...s,govId:e.target.value})),placeholder:"GOV-123456789"})]}),(0,t.jsxs)(e6,{className:"border-blue-200 bg-blue-50",children:[(0,t.jsx)(e3.Z,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)(e5,{className:"text-blue-800",children:["Default password will be: ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"admin123"}),(0,t.jsx)("br",{}),"User will be required to change it on first login."]})]}),(0,t.jsxs)(e0,{children:[(0,t.jsx)(d,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,t.jsx)(d,{type:"submit",children:"Create User"})]})]})]})]})]})}),(0,t.jsx)(h,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(em,{children:[(0,t.jsx)(eu,{children:(0,t.jsxs)(eh,{children:[(0,t.jsx)(ef,{children:"User"}),(0,t.jsx)(ef,{children:"Role"}),(0,t.jsx)(ef,{children:"Status"}),(0,t.jsx)(ef,{children:"Last Login"}),(0,t.jsx)(ef,{children:"Actions"})]})}),(0,t.jsx)(ex,{children:a.map(e=>(0,t.jsxs)(eh,{children:[(0,t.jsx)(ep,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:e.email}),(0,t.jsx)(d,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>P(e.email),children:(0,t.jsx)(sl.Z,{className:"h-3 w-3"})})]})]})}),(0,t.jsx)(ep,{children:(0,t.jsxs)(p,{variant:I(e.role),className:"flex items-center space-x-1 w-fit",children:[A(e.role),(0,t.jsx)("span",{className:"capitalize",children:e.role})]})}),(0,t.jsx)(ep,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(p,{variant:e.isDefaultPassword?"destructive":"default",children:e.isDefaultPassword?"Default Password":"Secure"}),e.id===s.id&&(0,t.jsx)(p,{variant:"outline",className:"text-xs",children:"Current User"})]})}),(0,t.jsx)(ep,{children:(0,t.jsx)("div",{className:"text-sm",children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"})}),(0,t.jsx)(ep,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(d,{variant:"outline",size:"sm",onClick:()=>{g(e),f(!0)},children:(0,t.jsx)(ss.Z,{className:"h-3 w-3"})}),e.id!==s.id&&(0,t.jsx)(d,{variant:"outline",size:"sm",onClick:()=>R(e.id,e.name),children:(0,t.jsx)(es.Z,{className:"h-3 w-3"})})]})})]},e.id))})]})})})]}),(0,t.jsx)(eH,{open:c,onOpenChange:f,children:(0,t.jsxs)(eX,{className:"sm:max-w-md",children:[(0,t.jsxs)(eK,{children:[(0,t.jsx)(e2,{children:"Edit User"}),(0,t.jsx)(e4,{children:"Update user information and permissions"})]}),j&&(0,t.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"edit-name",children:"Full Name"}),(0,t.jsx)(Z,{id:"edit-name",value:j.name,onChange:e=>g(s=>s?{...s,name:e.target.value}:null),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"edit-email",children:"Email Address"}),(0,t.jsx)(Z,{id:"edit-email",type:"email",value:j.email,onChange:e=>g(s=>s?{...s,email:e.target.value}:null),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"edit-role",children:"Role"}),(0,t.jsxs)(_,{value:j.role,onValueChange:e=>g(s=>s?{...s,role:e}:null),children:[(0,t.jsx)(V,{children:(0,t.jsx)(M,{})}),(0,t.jsxs)(J,{children:[(0,t.jsx)(B,{value:"ADMIN",children:"Administrator"}),(0,t.jsx)(B,{value:"EDITOR",children:"Editor"}),(0,t.jsx)(B,{value:"FILLER",children:"Filler"}),(0,t.jsx)(B,{value:"VIEWER",children:"Viewer"})]})]})]}),(0,t.jsxs)(e0,{children:[(0,t.jsx)(d,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,t.jsx)(d,{type:"submit",children:"Update User"})]})]})]})})]})}function sn(e){let{user:s,isOnline:a}=e,[l,i]=(0,r.useState)("overview"),[n,c]=(0,r.useState)([{id:1,type:"submission",message:"New form submission received",time:"2 min ago"},{id:2,type:"reminder",message:"Form deadline approaching",time:"1 hour ago"},{id:3,type:"sync",message:"Google Sheets sync completed",time:"3 hours ago"}]),[f,j]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{},[s]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Government Administration"}),(0,t.jsxs)(p,{variant:a?"default":"destructive",className:"ml-3",children:[a?(0,t.jsx)(w.Z,{className:"w-3 h-3 mr-1"}):(0,t.jsx)(b.Z,{className:"w-3 h-3 mr-1"}),a?"Online":"Offline"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(eJ,{notifications:n}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Welcome, ",s.name," (",s.role,")",s.isDefaultPassword&&(0,t.jsx)(p,{variant:"destructive",className:"ml-2",children:"Default Password"})]}),(0,t.jsx)(d,{variant:"outline",size:"sm",onClick:()=>j(!0),children:(0,t.jsx)(C.Z,{className:"w-4 h-4"})})]})]})})}),s.isDefaultPassword&&(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(S.Z,{className:"h-5 w-5 text-yellow-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Security Notice"}),(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"You are using the default password. Please change it for security."})]})]}),(0,t.jsx)(d,{variant:"outline",size:"sm",onClick:()=>j(!0),className:"bg-yellow-100 border-yellow-300 text-yellow-800 hover:bg-yellow-200",children:"Change Password"})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)(g,{value:l,onValueChange:i,className:"space-y-6",children:[(0,t.jsxs)(v,{className:"grid w-full grid-cols-7",children:[(0,t.jsx)(y,{value:"overview",children:"Overview"}),(0,t.jsx)(y,{value:"create-form",children:"Create Form"}),(0,t.jsx)(y,{value:"ocr",children:"OCR Digitize"}),(0,t.jsx)(y,{value:"interview",children:"QCM Interview"}),(0,t.jsx)(y,{value:"sync",children:"Google Sheets"}),(0,t.jsx)(y,{value:"users",children:"Users"}),(0,t.jsx)(y,{value:"reports",children:"Reports"})]}),(0,t.jsxs)(N,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(u,{className:"text-sm font-medium",children:"Active Forms"}),(0,t.jsx)(F.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(h,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:12}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2 from last week"})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(u,{className:"text-sm font-medium",children:"Completed Today"}),(0,t.jsx)(k.Z,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(h,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:8}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+12% from yesterday"})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(u,{className:"text-sm font-medium",children:"Pending Review"}),(0,t.jsx)(E.Z,{className:"h-4 w-4 text-yellow-600"})]}),(0,t.jsxs)(h,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:5}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(u,{className:"text-sm font-medium",children:"Overdue Items"}),(0,t.jsx)(S.Z,{className:"h-4 w-4 text-red-600"})]}),(0,t.jsxs)(h,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:2}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Quick Actions"}),(0,t.jsx)(x,{children:"Common tasks and shortcuts"})]}),(0,t.jsx)(h,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(d,{variant:"outline",className:"h-20 flex-col bg-transparent",onClick:()=>i("create-form"),children:[(0,t.jsx)(T.Z,{className:"h-6 w-6 mb-2"}),"Create Form"]}),(0,t.jsxs)(d,{variant:"outline",className:"h-20 flex-col bg-transparent",onClick:()=>i("ocr"),children:[(0,t.jsx)(R.Z,{className:"h-6 w-6 mb-2"}),"Scan Document"]}),(0,t.jsxs)(d,{variant:"outline",className:"h-20 flex-col bg-transparent",onClick:()=>i("interview"),children:[(0,t.jsx)(D.Z,{className:"h-6 w-6 mb-2"}),"Start Interview"]}),(0,t.jsxs)(d,{variant:"outline",className:"h-20 flex-col bg-transparent",onClick:()=>i("sync"),children:[(0,t.jsx)(P.Z,{className:"h-6 w-6 mb-2"}),"Sync Data"]})]})})]}),(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Recent Activity"}),(0,t.jsx)(x,{children:"Latest form submissions and updates"})]}),(0,t.jsx)(h,{children:(0,t.jsx)("div",{className:"space-y-4",children:[{form:"Citizen Registration Form",user:"John Doe",status:"completed",time:"10 min ago"},{form:"Building Permit Application",user:"Jane Smith",status:"pending",time:"1 hour ago"},{form:"Tax Assessment Form",user:"Mike Johnson",status:"overdue",time:"2 hours ago"}].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.form}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Submitted by ",e.user]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)(p,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.time})]})]},s))})})]})]}),(0,t.jsx)(N,{value:"create-form",children:(0,t.jsx)(ew,{user:s})}),(0,t.jsx)(N,{value:"ocr",children:(0,t.jsx)(eS,{user:s})}),(0,t.jsx)(N,{value:"interview",children:(0,t.jsx)(eZ,{user:s})}),(0,t.jsx)(N,{value:"sync",children:(0,t.jsx)(eL,{user:s})}),(0,t.jsx)(N,{value:"users",children:(0,t.jsx)(si,{user:s})}),(0,t.jsx)(N,{value:"reports",children:(0,t.jsxs)(o,{children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{children:"Reports & Analytics"}),(0,t.jsx)(x,{children:"View submission trends and export data"})]}),(0,t.jsx)(h,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(d,{variant:"outline",children:[(0,t.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),"Export to Excel"]}),(0,t.jsxs)(d,{variant:"outline",children:[(0,t.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),"Export to PDF"]}),(0,t.jsxs)(d,{variant:"outline",children:[(0,t.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),"Generate Report"]})]}),(0,t.jsx)("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Analytics dashboard would be displayed here"})})]})})]})})]})}),(0,t.jsx)(e7,{open:f,onOpenChange:j,required:s.isDefaultPassword})]})}var sc=a(4232);function sd(){let[e,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,n]=(0,r.useState)(!1),{login:c}=e9(),{toast:f}=(0,er.pm)(),p=async s=>{s.preventDefault(),n(!0);try{let s=await c({email:e,password:a,type:"email"});(null==s?void 0:s.success)?s.requiresPasswordChange?f({title:"Password Change Required",description:"Please change your default password for security.",variant:"destructive"}):f({title:"Login Successful",description:"Welcome to Government Administration System"}):f({title:"Login Failed",description:(null==s?void 0:s.error)||"Invalid credentials",variant:"destructive"})}catch(e){f({title:"Login Error",description:"An unexpected error occurred",variant:"destructive"})}finally{n(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsxs)(o,{className:"w-full max-w-md",children:[(0,t.jsxs)(m,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100",children:(0,t.jsx)(sc.Z,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsx)(u,{className:"text-2xl font-bold",children:"Government Administration"}),(0,t.jsx)(x,{children:"Secure access to digital forms and document management"})]}),(0,t.jsxs)(h,{children:[(0,t.jsxs)(e6,{className:"mb-6 border-blue-200 bg-blue-50",children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)(e5,{className:"text-blue-800",children:[(0,t.jsx)("strong",{children:"First Time Setup:"})," Use default credentials to get started",(0,t.jsxs)("div",{className:"mt-2 space-y-1 text-sm",children:[(0,t.jsxs)("div",{children:["Username: ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"admin"})]}),(0,t.jsxs)("div",{children:["Password: ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"admin"})]})]}),(0,t.jsx)(d,{variant:"link",size:"sm",className:"p-0 h-auto text-blue-600 mt-2",onClick:fillDefaultCredentials,children:"Click to fill automatically"})]})]}),(0,t.jsxs)(g,{defaultValue:"email",className:"w-full",children:[(0,t.jsx)(v,{className:"grid w-full grid-cols-1",children:(0,t.jsx)(y,{value:"email",children:"Email Login"})}),(0,t.jsx)(N,{value:"email",children:(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"email",children:"Username/Email"}),(0,t.jsx)(Z,{id:"email",type:"text",placeholder:"admin or your.email@gov.org",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{htmlFor:"password",children:"Password"}),(0,t.jsx)(Z,{id:"password",type:"password",placeholder:"Enter password",value:a,onChange:e=>l(e.target.value),required:!0})]}),(0,t.jsxs)(d,{type:"submit",className:"w-full",disabled:i,children:[(0,t.jsx)(se.Z,{className:"mr-2 h-4 w-4"}),i?"Signing In...":"Sign In"]})]})})]}),(0,t.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-600",children:[(0,t.jsx)("p",{children:"\uD83D\uDD12 All communications are encrypted via HTTPS"}),(0,t.jsx)("p",{className:"mt-1",children:"Role-based access control enabled"})]})]})]})})}function so(){let{user:e,loading:s}=e9(),[a,l]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=()=>l(!0),s=()=>l(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),l(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),s)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):e?(0,t.jsx)(sn,{user:e,isOnline:a}):(0,t.jsx)(sd,{})}},311:function(e,s,a){"use strict";a.d(s,{pm:function(){return u}});var t=a(2265);let r=0,l=new Map,i=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],d={toasts:[]};function o(e){d=n(d,e),c.forEach(e=>{e(d)})}function m(e){let{...s}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,s]=t.useState(d);return t.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7440:function(e,s,a){"use strict";a.d(s,{cn:function(){return l}});var t=a(4839),r=a(6164);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.m6)((0,t.W)(s))}}},function(e){e.O(0,[27,658,971,23,744],function(){return e(e.s=8186)}),_N_E=e.O()}]);